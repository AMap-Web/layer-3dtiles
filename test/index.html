<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>测试</title>
    <style type="text/css">
      html,body,#app{
          height: 100%;
      }

    </style>
    <script src = 'https://webapi.amap.com/maps?v=2.0&key=747f980f217a31ba68d99301045a3fa7&plugin=AMap.3DTilesLayer'></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.142/build/three.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.142/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@amap/three-layer/dist/index.js"></script>
    <script src="/index.js" ></script>
  </head>
  <body>
    <div id="app"></div>
    <script type="text/javascript">
      // const center = [116.1525,39.906]
      const center = [116.405242513021,39.909402940539]
      const map = new AMap.Map('app', {
        center: center,
        zoom: 14,
        viewMode: '3D',
        showBuildingBlock: false,
        pitch: 35
      })
      const layer = new AMap.ThreeLayer(map)
      layer.on('complete', () => {
        const light = new THREE.AmbientLight('#ffffff', 1);
        layer.add(light);
        const tiles = new AMap.Layer3DTiles(layer, {
          // url: 'https://a.amap.com/jsapi_demos/static/data3d/single.json',
          url: './hutong/tileset.json',
          position: center
        })
        tiles.setRotation({
          x:0,
          y:0,
          z:0
        })
        tiles.setTranslate({x:15,y:15,z:0})
        console.log('layer: ', layer)
        console.log('tiles: ', tiles)
      })

    </script>
  </body>
</html>
